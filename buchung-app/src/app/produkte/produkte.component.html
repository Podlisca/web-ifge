<ng-container *ngIf="vm$ | async as vm">
    <div id="selection-container" *ngIf="vm.length > 0; else inPlanung">
        <ng-container *ngFor="let vmOrt of vm" class="ort">
            <div class="location" [style.color]="config.color_bundesland">
                {{vmOrt[0].ort}}
            </div>
            <div class="content" [style.background-color]="config.color_termin">
                <div class="group" *ngFor="let view of vmOrt">
                    <div class="title"> {{view.title}}</div>
                    <div>
                        <ng-container *ngFor="let p of view.produkte; let idx = index">
                            <app-termin [produkt]="p" (onSelect)="onSelect($event)" [idx]="idx"
                                *ngIf="idx < maxProducts || showAll.checked"
                                [class.selected]="idx === selection?.index && vmOrt[0].ort == selection?.produkt?.ort && selection?.produkt?.id == p.id" />
                        </ng-container>
                    </div>
                    <div [class.hide]="view.produkte.length < maxProducts" class="toggle">
                        <mat-slide-toggle #showAll>Zeige alle</mat-slide-toggle>
                    </div>
                </div>
            </div>
        </ng-container>
    </div>
    <ng-template #inPlanung>
        <div style="text-align: center;">
            Termine in Planung...
        </div>
    </ng-template>
</ng-container>