<nav class="topnav" id="myTopnav">
  {{ $currentPage := . }}
  {{ range .Site.Menus.main }}
    {{ if .HasChildren }}  
      
      <div class="dropdown {{ if $currentPage.HasMenuCurrent "main" . }}active{{ end }}">
        
        <a href="{{ .URL }}" class="has-dropdown">
          {{ .Name }}
        </a>

        <div class="dropdown-content">
          {{ range .Children }}
                
            {{ if .HasChildren }}
              <div class="dropdown2 {{ if $currentPage.HasMenuCurrent "main" . }}active{{ end }}">
          
                <a href="{{ .URL }}" class="has-dropside">
                  {{ .Name }}
                </a>
        
                <div class="dropdown2-content">
                  {{ range .Children }}
                    <a class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>    
                  {{ end }}
                </div>
              </div>
            {{ else }}
              <a class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
            {{ end }}

          {{ end }}
        </div>
      </div>
    {{ else }}
      <a class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}" href="{{ .URL }}">{{ .Name }}</a> 
    {{ end }}
  {{ end }}

  <a href="javascript:void(0);" class="icon" onclick="myFunction()">&#9776;</a>    
</nav>